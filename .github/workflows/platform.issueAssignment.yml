# Add new issues to the corrrect project
name: Assign Issues to Projects

on:
  # Triggers the workflow on push or pull request events but only for the main branch
  issues:
    types:
      - opened
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

env:
  GITHUB_TOKEN: ${{ github.token }}

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  add-to-project:
    name: Add Issues to Projects
    runs-on: ubuntu-latest
    steps:
      - name: Add Bug to Bug Board
        uses: srggrs/assign-one-project-github-action@1.2.1
        if: |
          contains(github.event.issue.labels.*.name, 'bug')
        with:
          project: https://github.com/MrMCake/ResourceModules/projects/1
          column_name: 'Needs triage'
      - name: Add Issues to Backlog Board
        uses: srggrs/assign-one-project-github-action@1.2.1
        if: |
          contains(github.event.issue.labels.*.name, 'needs triage') &&
          !contains(github.event.issue.labels.*.name, 'bug')
        with:
          project: https://github.com/MrMCake/ResourceModules/projects/2
          column_name: 'Needs triage'
